# Agent Skills Concept

> 概要: 

​	本文包含 Agent Skills 相关概念、原理、运行机制。

------

## 1. Agent Skills 是什么

Agent Skills 可以理解为“一种带目录的说明书”，其核心是“渐进式披露提示词”的机制（progressive disclosure）。

与传统把所有提示词一次性塞入上下文不同，Agent Skills 将提示词拆分为多个层级，先加载最小必要信息，再按需加载更多细节，从而降低 token 消耗并减少提示词复杂度。

------

## 2. Skills 的三层结构

Agent Skills 将一个技能拆分为三层：

### 2.1 元数据层（Metadata）

- 内容：技能名称、描述、尤其是“调用时机”
- 特点：必定进入模型上下文
- 作用：形成“技能目录”，供模型判断是否需要调用技能

可将其类比为一本书的目录。

### 2.2 指令层（Instructions）

- 内容：该技能的详细执行指令（相当于完整 Prompt）
- 特点：按需加载（通常在模型选择该技能，并且用户确认使用后才加载）
- 作用：约束模型行为、规定输出格式、明确边界条件

可将其类比为书的正文。

### 2.3 资源层（Resources）

- 内容：任意辅助文件，例如脚本、参考文档、图片等
- 特点：按需读取；只有模型在执行过程中判断“需要读取”才会加载到上下文（脚本代码本身通常不作为上下文传递）
- 作用：让技能更稳定、更工程化，或承载风格示例、操作脚本等

可将其类比为书的附录。

------

## 3. 为什么 Skills 能降低 token 与复杂度

### 3.1 按需加载机制

技能的元数据很短，始终加载；而指令与资源只有在需要时才加载。这样避免了将大量提示词一口气塞入上下文。

### 3.2 将“复杂操作”外包给资源层

对于截图、文件处理、批量改写等任务，可以通过 scripts 脚本执行。脚本的代码不必进上下文，减少 token 消耗，并提升可维护性。

------

## 5. Skills 的运行机制（调用流程）

典型调用流程如下：

1. 用户向 Agent 提出请求
2. Agent 扫描本地所有 skill.md，提取每个 Skill 的元数据，形成“技能列表”
3. Agent 将“用户提问 + 技能列表”一起发送给大模型
4. 大模型判断：
   - 不使用任何 Skill，直接回答
   - 选择某个 Skill 来解决问题
5. 如果选择 Skill，Agent 会加载该 Skill 的指令层内容并发送给模型（常见为用户确认后加载）
6. 模型执行指令，必要时按需读取资源层文件（references、assets 等）
7. 若技能包含脚本，Agent 可执行 scripts 中脚本以完成某些操作（例如视频截图、文件生成、代码执行）

------

## 8. Skills、Prompt、MCP 的区别与协作方式

### 8.1 Skills vs Prompt

- Prompt：一次性提示词，所有内容直接进上下文
- Skills：目录化、按需加载提示词（元数据必加载，指令与资源按需）

因此 Skills 在 token 与复杂度管理上更有优势。

### 8.2 Skills vs MCP

- Skills 的重点：提示词管理（渐进式披露）
- MCP 的重点：工具调用标准化（更像工具箱/服务）

二者差异常见表现：

- Skills 主体是 Markdown 文本；脚本只是辅助能力，且受本地环境影响较大（比如 Python 环境差异导致执行失败概率较高）
- MCP 主体是 Node.js/Python 软件包或服务化工具，执行成功率与可移植性一般更强，但编写与部署成本更高

### 8.3 Skills + MCP 的协作模式

最佳实践是让二者各司其职：

- Skills：负责提示词与流程编排（包含“何时调用哪些工具”的说明）
- MCP：负责稳定执行工具调用（创建仓库、上传文件、读写数据等）

常见协作示例：

- Skills 生成文案或文档
- Skills 指示使用 MCP 工具创建 GitHub 仓库与上传文档文件
- MCP 执行具体 API 操作

