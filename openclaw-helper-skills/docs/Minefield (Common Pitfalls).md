# âš ï¸ é›·åŒºï¼ˆé«˜é¢‘è¸©å‘ï¼‰

---

## Telegram é…å¯¹æœªæ‰¹å‡† â†’ æœºå™¨äººä¸å›æ¶ˆæ¯

è¡¨ç°ï¼š

- å¡åœ¨â€œé…å¯¹ä¸­â€

- æœºå™¨äººä¸å“åº”

è§£å†³ï¼š

```bash
openclaw pairing approve --channel <channel> <code>
```



---

## ç¬¬ä¸‰æ–¹ API baseUrl å†™é”™ï¼ˆä¸èƒ½å¸¦ /v1ï¼‰

âŒ é”™è¯¯ï¼š

```json
"baseUrl": "https://api.example.com/v1"
```

ä¼šå¯¼è‡´ï¼š

- Invalid endpoint

- æ‹¼æˆ /v1/v1/messages

æ­£ç¡®ï¼š

```json
"baseUrl": "https://api.antigravity.ai"
```



## vps/wsl/è™šæ‹Ÿæœº éƒ¨ç½²åæ— æ³•è®¿é—®



1.é…ç½®æ–‡ä»¶æœªæ”¾å¼€

check  openclaw.json shuld be like this:

`~/.openclaw/openclaw.json`

```json
{
  "gateway": {
    "port": 18789,
    "mode": "local",
    "bind": "lan", //checking is lan
    "controlUi": { "allowInsecureAuth": true },//had?
    "auth": { "mode": "token", "token": "xxxx" }
  }
}
```

2.æ—©æœŸç‰ˆæœ¬æœªçŸ¥å¼‚å¸¸ï¼Œéœ€è¦è§£å†³



## openclawæ— æ³•æ“ä½œæµè§ˆå™¨





éœ€è¦æ‰‹åŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œç„¶åæ¿€æ´»æ‰©å±•æ’ä»¶ï¼Œæç¤ºæ’ä»¶è¢«æ§åˆ¶ï¼Œå¦åˆ™æ— æ³•æ“ä½œæµè§ˆå™¨

---

## å®šæ—¶ä»»åŠ¡å®Œå…¨ä¸è§¦å‘

### é—®é¢˜ 1ï¼šå®šæ—¶ä»»åŠ¡åˆ›å»ºæˆåŠŸä½†ä»æœªæ‰§è¡Œ

**ç°è±¡ï¼š**
- åˆ›å»ºäº†å®šæ—¶ä»»åŠ¡ï¼Œä½†ä»æ¥æ²¡æœ‰æ‰§è¡Œ
- `nextWakeAtMs` æ˜¾ç¤ºä¸º `null`
- æ—¥å¿—ä¸­æ²¡æœ‰ä»»ä½•ä»»åŠ¡è§¦å‘è®°å½•

**æ ¹æœ¬åŸå› ï¼š**
é…ç½®ä¸­ç¼ºå°‘ `heartbeat` è®¾ç½®

**æŠ€æœ¯ç»†èŠ‚ï¼š**
- å®šæ—¶ä»»åŠ¡é»˜è®¤ä½¿ç”¨ `wakeMode: "next-heartbeat"`
- éœ€è¦ heartbeat å®šæœŸè½®è¯¢æ‰èƒ½æ£€æŸ¥å’Œè§¦å‘ä»»åŠ¡
- é…ç½®é‡Œå®Œå…¨æ²¡æœ‰ heartbeatï¼Œæ‰€ä»¥ä»»åŠ¡æ°¸è¿œä¸ä¼šè¢«æ£€æŸ¥

**è§£å†³æ–¹æ¡ˆï¼š**

å¯ç”¨ heartbeatï¼š

```json
{
  "agents": {
    "defaults": {
      "heartbeat": {
        "every": "5m"  // æ¯ 5 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡å®šæ—¶ä»»åŠ¡
      }
    }
  }
}
```

---

## å®šæ—¶ä»»åŠ¡æ‰§è¡Œäº†ä½†æ²¡æ”¶åˆ° Telegram æ¶ˆæ¯

### é—®é¢˜ 2ï¼šä»»åŠ¡æ˜¾ç¤º "ok" ä½† Telegram æ²¡æ”¶åˆ°é€šçŸ¥

**ç°è±¡ï¼š**
- ä»»åŠ¡åœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºæ‰§è¡ŒæˆåŠŸ ("ok")
- Telegram å®Œå…¨æ²¡æ”¶åˆ°æ¶ˆæ¯
- æ²¡æœ‰ä»»ä½•æŠ¥é”™ä¿¡æ¯

**æ ¹æœ¬åŸå› ï¼š**
ä½¿ç”¨äº†é”™è¯¯çš„ `payload` ç±»å‹

**æŠ€æœ¯ç»†èŠ‚ï¼š**
- `payload.kind: "systemEvent"` åªä¼šå†™å…¥ session å†…éƒ¨æ—¥å¿—
- ä¸ä¼šä¸»åŠ¨å‘é€æ¶ˆæ¯åˆ°ä»»ä½•æ¸ é“
- éœ€è¦ç”¨ `payload.kind: "agentTurn"` + `deliver: true` æ‰èƒ½å‘é€æ¶ˆæ¯

**âŒ é”™è¯¯æ–¹å¼ï¼ˆåªå†™æ—¥å¿—ï¼‰ï¼š**

```json
{
  "sessionTarget": "main",
  "payload": {
    "kind": "systemEvent",
    "text": "æé†’å†…å®¹"
  }
}
```

**âœ… æ­£ç¡®æ–¹å¼ï¼ˆå‘é€æ¶ˆæ¯ï¼‰ï¼š**

```json
{
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "è¯·å‘é€æ¶ˆæ¯åˆ° Telegramï¼šğŸ”” æé†’å†…å®¹",
    "deliver": true,
    "channel": "telegram",
    "to": "7278837287"
  }
}
```

---

## å®šæ—¶ä»»åŠ¡å…³é”®çŸ¥è¯†ç‚¹

### 1. sessionTarget çš„åŒºåˆ«

- **`main`**: åªèƒ½ç”¨ `systemEvent`ï¼Œå†™å…¥ä¸»ä¼šè¯æ—¥å¿—
- **`isolated`**: å¿…é¡»ç”¨ `agentTurn`ï¼Œåˆ›å»ºç‹¬ç«‹ä¼šè¯æ‰§è¡Œä»»åŠ¡

### 2. payload.kind çš„åŒºåˆ«

- **`systemEvent`**: ç³»ç»Ÿäº‹ä»¶ï¼Œä»…è®°å½•æ—¥å¿—
- **`agentTurn`**: è®© AI æ‰§è¡Œä»»åŠ¡ï¼Œå¯ä»¥è°ƒç”¨å·¥å…·ã€å‘é€æ¶ˆæ¯

### 3. deliver å‚æ•°

- **`deliver: true`**: ä»»åŠ¡ç»“æœä¼šå‘é€åˆ°æŒ‡å®šæ¸ é“
- **`channel` + `to`**: æŒ‡å®šå‘é€ç›®æ ‡

---

## åˆ›å»ºå®šæ—¶æé†’çš„å®Œæ•´æ­£ç¡®å‘½ä»¤

```bash
openclaw cron add \
  --name "ä¹°èœæé†’" \
  --at "$(date -d '+30 minutes' +%s)000" \
  --session isolated \
  --payload '{
    "kind": "agentTurn",
    "message": "å‘é€æé†’ï¼šğŸ›’ è¯¥å»ä¹°èœäº†ï¼",
    "deliver": true,
    "channel": "telegram",
    "to": "7278837287"
  }'
```

**æ³¨æ„ï¼š**
- heartbeat é…ç½®å¿…é¡»åœ¨ `~/.openclaw/openclaw.json` ä¸­å¯ç”¨
- Windows ç³»ç»Ÿä¸‹æ—¶é—´æˆ³è®¡ç®—å¯èƒ½éœ€è¦ä½¿ç”¨å…¶ä»–æ–¹å¼ï¼ˆPowerShell æˆ–ç›´æ¥è¾“å…¥æ¯«ç§’æ—¶é—´æˆ³ï¼‰
